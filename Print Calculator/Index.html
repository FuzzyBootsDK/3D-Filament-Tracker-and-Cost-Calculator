<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8" />
  <title>Omkostningsberegner til 3D-print</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="bg-body text-main">
  <header class="topbar">
    <div class="topbar-left">
      <div class="logo-mark">3DP</div>
      <div>
        <div class="topbar-title">Omkostningsberegner til 3D-print</div>
        <div class="topbar-sub">Tailwind‑style mockup – alle funktioner låst op</div>
      </div>
    </div>
    <div class="topbar-right">
      <button class="pill">Dansk</button>
      <button class="pill">DKK kr</button>
      <button class="btn-primary-sm">Log ind</button>
    </div>
  </header>

  <main class="layout">
    <!-- LEFT COLUMN -->
    <section class="card">
      <h2 class="card-title">Projektdetaljer</h2>
      <p class="card-sub">Grunddata for dit print og materialer</p>

      <div class="grid-2 gap-md mt-md">
        <div class="field">
          <label for="partName">Delnavn</label>
          <input id="partName" type="text" placeholder="f.eks. Beslag til hylde" />
        </div>

        <div class="field">
          <label for="printerProfile">Printerprofil</label>
          <select id="printerProfile">
            <option value="">Vælg en printer...</option>
            <option value="Bambu X1C">Bambu X1C</option>
            <option value="Bambu P1S">Bambu P1S</option>
            <option value="Bambu A1">Bambu A1</option>
            <option value="Bambu A1 mini">Bambu A1 mini</option>
            <option value="Bambu H2S">Bambu H2S</option>
            <option value="Bambu H2D">Bambu H2D</option>
            <option value="Bambu H2C">Bambu H2C</option>
          </select>
        </div>

        <!-- PRINT TIME -->
        <div class="field">
          <label>Printtid</label>
          <div class="grid-2 gap-md">
            <input id="printHours" type="number" step="1" value="0" placeholder="Timer" />
            <input id="printMinutes" type="number" step="1" value="0" placeholder="Minutter" />
          </div>
        </div>

        <!-- HANDLING TIME -->
        <div class="field">
          <label>Håndteringstid</label>
          <div class="grid-2 gap-md">
            <input id="laborHours" type="number" step="1" value="0" placeholder="Timer" />
            <input id="laborMinutes" type="number" step="1" value="0" placeholder="Minutter" />
          </div>
        </div>

        <div class="field">
          <label for="hardwareCost">Hardwareomkostning (DKK)</label>
          <input id="hardwareCost" type="number" step="1" value="0" />
        </div>

        <div class="field">
          <label for="packagingCost">Emballageomkostning (DKK)</label>
          <input id="packagingCost" type="number" step="1" value="0" />
        </div>

        <div class="field">
          <label for="vatRate">Momssats (%)</label>
          <input id="vatRate" type="number" step="1" value="25" />
        </div>

        <div class="field">
          <label for="batchSize">Batch størrelse (stk)</label>
          <input id="batchSize" type="number" step="1" value="1" min="1" />
        </div>
      </div>

      <hr class="divider" />

      <h3 class="section-title">Materialer (multimateriale)</h3>
      <p class="card-sub">Tilføj et eller flere filamenter til projektet</p>

      <div class="materials-header">
        <span>Navn</span>
        <span>Pris/kg</span>
        <span>Vægt (g)</span>
        <span></span>
      </div>
      <div id="materialsBody"></div>

      <button id="addMaterialBtn" class="btn-secondary mt-sm">+ Tilføj materiale</button>

      <hr class="divider" />

      <h3 class="section-title">G‑code import</h3>
      <p class="card-sub">Importer G‑code for automatisk at udfylde printtid og vægt</p>

      <div class="gcode-row">
        <input type="file" id="gcodeFile" accept=".gcode" />
        <button id="gcodeImportBtn" class="btn-secondary">Indlæs G‑code</button>
      </div>
      <p id="gcodeStatus" class="hint"></p>

      <hr class="divider" />

      <h3 class="section-title">Avancerede indstillinger</h3>
      <p class="card-sub">Maskinomkostning, el, afskrivning og buffer</p>

      <div class="grid-2 gap-md mt-sm">
        <div class="field">
          <label for="hourlyRate">Timeløn (DKK/hr)</label>
          <input id="hourlyRate" type="number" value="200" />
        </div>

        <div class="field">
          <label for="materialFactor">Materialefaktor</label>
          <input id="materialFactor" type="number" step="0.05" value="1.1" />
        </div>

        <div class="field">
          <label for="printerPrice">Printerpris (DKK)</label>
          <input id="printerPrice" type="number" value="5599" />
        </div>

        <div class="field">
          <label for="printerLifetimeYears">Estimeret levetid (år)</label>
          <input id="printerLifetimeYears" type="number" step="0.5" value="3" />
        </div>

        <div class="field">
          <label for="uptimePercent">Oppetidsprocent (%)</label>
          <input id="uptimePercent" type="number" step="1" value="50" />
        </div>

        <div class="field">
          <label for="maintenanceYearly">Årligt vedligehold (DKK)</label>
          <input id="maintenanceYearly" type="number" value="549" />
        </div>

        <div class="field">
          <label for="powerWatt">Strømforbrug (W)</label>
          <input id="powerWatt" type="number" value="150" />
        </div>

        <div class="field">
          <label for="electricityPrice">Elpris (DKK/kWh)</label>
          <input id="electricityPrice" type="number" step="0.01" value="0.2" />
        </div>

        <div class="field">
          <label for="bufferFactor">Bufferfaktor</label>
          <input id="bufferFactor" type="number" step="0.05" value="1.3" />
        </div>
      </div>
    </section>

    <!-- RIGHT COLUMN -->
    <section class="card">
      <h2 class="card-title">Prissætning</h2>
      <p class="card-sub">Baseret på beregnet enhedsomkostning</p>

      <div class="pill-row mt-sm">
        <span class="pill-soft">Enhedsomkostning: <span id="unitCostLabel">0,00 kr.</span></span>
        <span class="pill-soft">Batch: <span id="batchLabel">1 stk</span></span>
      </div>

      <div id="pricingList" class="pricing-list mt-md"></div>

      <div class="field mt-md">
        <label for="customMargin">Tilpasset vinstmargin</label>
        <div class="range-row">
          <input id="customMargin" type="range" min="10" max="150" value="50" />
          <span id="customMarginLabel">50%</span>
        </div>
      </div>

      <div class="summary mt-md">
        <div class="summary-row">
          <span>Valgt pris inkl. moms</span>
          <span id="selectedPrice">0,00 kr.</span>
        </div>
        <div class="summary-row muted">
          <span>Valgt margin</span>
          <span id="selectedMargin">40%</span>
        </div>
      </div>

      <div class="actions mt-md">
        <button id="exportPdfBtn" class="btn-primary">Eksportér tilbud som PDF</button>
      </div>

      <hr class="divider" />

      <h3 class="section-title">Batch‑optimering</h3>
      <p class="card-sub">Se hvordan enhedsprisen ændrer sig med antal</p>

      <table class="table mt-sm">
        <thead>
          <tr>
            <th>Antal</th>
            <th>Enhedsomkostning</th>
            <th>Pris (40% margin)</th>
          </tr>
        </thead>
        <tbody id="batchTableBody"></tbody>
      </table>

      <hr class="divider" />

      <h3 class="section-title">Omkostningsfordeling (pr. enhed)</h3>

      <div class="cost-grid mt-sm">
        <div class="cost-row">
          <span>Materiale</span>
          <span id="costMaterial">0,00 kr.</span>
        </div>
        <div class="cost-row">
          <span>Arbejdsløn</span>
          <span id="costLabor">0,00 kr.</span>
        </div>
        <div class="cost-row">
          <span>Maskine</span>
          <span id="costMachine">0,00 kr.</span>
        </div>
        <div class="cost-row">
          <span>Hardware</span>
          <span id="costHardware">0,00 kr.</span>
        </div>
        <div class="cost-row">
          <span>Emballage</span>
          <span id="costPackaging">0,00 kr.</span>
        </div>
      </div>

      <div class="summary mt-sm">
        <div class="summary-row">
          <span>Total landet omkostning</span>
          <span id="costTotal">0,00 kr.</span>
        </div>
      </div>
    </section>
  </main>

  <script src="gcode.js" defer></script>
  <script src="pdf.js" defer></script>
  <script src="app.js" defer></script>
</body>
</html>
